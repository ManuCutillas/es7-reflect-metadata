var objectAssign = require('object-assign');
var webpack = require('webpack');
var path = require('path');

var webpackConfig = require('./webpack.config.js');
module.exports = objectAssign({}, webpackConfig, {
  output: {
    path: root("dist"),
    filename: "es7-reflect-metadata.min.js",
    library: "Reflect",
    libraryTarget: "umd"
  },
  plugins: [
    new webpack.optimize.OccurenceOrderPlugin(),
    new webpack.optimize.DedupePlugin(),
    new webpack.optimize.UglifyJsPlugin()
  ]
});

function root(args) {
  args = Array.prototype.slice.call(arguments, 0);
  return path.join.apply(path, [__dirname].concat(args));
}
